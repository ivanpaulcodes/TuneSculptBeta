<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User</title>
  </head>
  <body>
    <!-- dito mag reredirect yung user after login -->
    <h1>Welcome User</h1>

    <h2 id="name">Your name is :</h2>

    <button id="SignoutBtn">Signout</button>

    <h2 id="msg"></h2>
    <h2 id="greet"></h2>
  <script>
    // json.parse reverses the effect of json.stringify so cconvert niya yung string back to object
    let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"))
    let UserInfo = JSON.parse(sessionStorage.getItem("user-info"))

    let MsgHead = document.getElementById('msg')
    let GreetHead = document.getElementById('greet')
    let SignoutBtn = document.getElementById('SignoutBtn')


    let Signout = () => {
      sessionStorage.removeItem("user-creds")
      sessionStorage.removeItem("user-info")
      window.location.href = 'Login.html'
    }

    let CheckCred = () => {
      if(!sessionStorage.getItem("user-creds")){
        window.location.href = 'Login.html'
      } else {
        MsgHead.innerText = `user with email "${UserCreds.email}" logged in`
        GreetHead.innerText = `welcome "${UserInfo.name}"!`
      }
    }

    window.addEventListener('load', CheckCred)
    SignoutBtn.addEventListener('click', Signout)
  </script>

  </body>
</html>
